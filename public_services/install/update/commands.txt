UPDATE `@@copscheme@@`.`__definition_function_extra_selects` SET `extra_select` = ',concat(trainings.uid,\'|\',trainings.allow_officer_self_entry,\'|\',(SELECT count(*)>0 from trainings_employees where training_id = trainings.uid and employee_id = @@USERID@@)) as participate\n,(SELECT concat(last_name,\', \', first_name) from registered_user where userid = trainings.instructor_id) as instructor_id' WHERE (`function_name` = 'trainings');
UPDATE `@@medicscheme@@`.`__definition_dropdowns` SET `sql_query` = 'select \n	userid as uid\n	,concat(loginname ,\' - \',last_name,\', \',first_name) as name\nfrom registered_user \n	where deleted = 0 \n	and suspended = 0 \n  and rankid<>9999\nORDER BY last_name, first_name' WHERE (`column_name` = 'instructor_id');
DELETE FROM `@@medicscheme@@`.__definition_additional_data WHERE function_name = 'form_files_add_entry';
ALTER TABLE `@@copscheme@@`.`registered_vehicle` ADD COLUMN `color` VARCHAR(45) NOT NULL DEFAULT '';
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `needsValidation` = '0' WHERE (`function_name` = 'form_crimes') and (`columnname` = 'others');
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `textMixLength` = '0', `textMaxLength` = '0' WHERE (`function_name` = 'form_vehicle') and (`columnname` = 'plate');
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `needsValidation` = '0' WHERE (`function_name` = 'form_vehicle') and (`columnname` = 'additional_info');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Modell' WHERE (`locale` = 'de') and (`programmtype` = 'columns') and (`keyvalue` = 'vehicle');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Model' WHERE (`locale` = 'en') and (`programmtype` = 'columns') and (`keyvalue` = 'vehicle');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Modell' WHERE (`locale` = 'de') and (`programmtype` = 'registered_vehicle') and (`keyvalue` = 'vehicle');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Model' WHERE (`locale` = 'en') and (`programmtype` = 'registered_vehicle') and (`keyvalue` = 'vehicle');
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `form_group` = '40' WHERE (`function_name` = 'form_vehicle') and (`columnname` = 'additional_info');
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `form_group` = '30' WHERE (`function_name` = 'form_vehicle') and (`columnname` = 'vehicle');
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `form_group` = '50' WHERE (`function_name` = 'form_vehicle') and (`columnname` = 'is_wanted');
UPDATE `@@copscheme@@`.`__definition_formconfig` SET `form_group` = '60' WHERE (`function_name` = 'form_vehicle') and (`columnname` = 'reason_of_is_wanted');
INSERT INTO `@@copscheme@@`.`__definition_formconfig` (`function_name`, `columnname`, `form_group`, `sortorder`, `form_type`, `allowInEdit`, `allowInAdd`, `allowInView`) VALUES ('form_vehicle', 'color', '30', '20', 'text', '1', '1', '1') on duplicate key update `form_group` = VALUES(`form_group`), `sortorder` = VALUES(`sortorder`) , `form_type` = VALUES(`form_type`), `allowInEdit` = VALUES(`allowInEdit`), `allowInAdd` = VALUES(`allowInAdd`), `allowInView` = VALUES(`allowInView`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'registered_vehicle', 'color', 'Farbe') on duplicate key update `translation` = VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'registered_vehicle', 'color', 'color') on duplicate key update `translation` = VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'columns', 'color', 'Farbe') on duplicate key update `translation` = VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'columns', 'color', 'color') on duplicate key update `translation` = VALUES(`translation`);
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Leitstelle' WHERE (`locale` = 'de') and (`programmtype` = 'dashboard') and (`keyvalue` = 'current_control_centre');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Leitstelle' WHERE (`locale` = 'de') and (`programmtype` = 'pageloader') and (`keyvalue` = 'control_centre');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Rang Management' WHERE (`locale` = 'de') and (`programmtype` = 'pageloader') and (`keyvalue` = 'group_management');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Rank Management' WHERE (`locale` = 'en') and (`programmtype` = 'pageloader') and (`keyvalue` = 'group_management');
UPDATE `@@copscheme@@`.`__definition_rights` SET `name_de` = 'Leitstelle - Sehen', `name_en` = 'Control centre - View' WHERE where function_name = 'control_centre' and sub_function = 'view' and sortorder = 2000;
INSERT INTO `@@copscheme@@`.`__definition_rights` (`function_name`, `sub_function`, `name_de`, `name_en`, `sortorder`) VALUES ('archiv', 'delete_entries', 'Archiv - Entgültig löschen', 'Archive - Delete permanently', '2220') on duplicate key update `name_de` = VALUES(`name_de`), `name_en` = VALUES(`name_en`), `sortorder` = VALUES(`sortorder`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'control_centre', 'current_control_take', 'Leitstelle übernehmen') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'control_centre', 'current_control_take', 'Take over control center') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'global', 'officers', 'Polizisten') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'global', 'officers', 'Officers') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'view_criminal_complaints_byfile_0', 'Gestellte Anzeigen')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'view_criminal_complaints_byfile_0', 'Filed criminal complaint')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'view_criminal_complaints_byfile_1', 'Unbearbeitete Anzeigen')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'view_criminal_complaints_byfile_1', 'Unprocessed criminal charges')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'view_criminal_complaints_byfile_2', 'Anzeigen in Bearbeitung')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'view_criminal_complaints_byfile_2', 'Criminal charges in process')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'view_criminal_complaints_byfile_3', 'Geschlossene Anzeigen')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'view_criminal_complaints_byfile_3', 'Closed criminal charges')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'columns', 'reporter', 'Gestellte Anzeigen')on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@copscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'columns', 'reporter', 'Filed criminal complaint')on duplicate key update `translation`= VALUES(`translation`);
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Funkcode' WHERE (`locale` = 'de') and (`programmtype` = 'columns') and (`keyvalue` = 'patrol_status_shortname');
UPDATE `@@copscheme@@`.`__definition_languages_values` SET `translation` = 'Radio code' WHERE (`locale` = 'en') and (`programmtype` = 'columns') and (`keyvalue` = 'patrol_status_shortname');
UPDATE `@@copscheme@@`.`__definition_function_extra_selects` SET `extra_select` = ',(select files.name from files where files.uid = criminal_complaints.complaint_reporter) as complaint_reporter\n,IF(perpetrator <> 0 , \n	(select files.name from files where files.uid = criminal_complaints.perpetrator) \n	,IFNULL((\n		SELECT translation \n			FROM __definition_languages_values \n			WHERE programmtype = \'global\'\n				AND locale = \'@@LOCALE@@\'\n				AND keyvalue = \'unknown\')\n		,\'unknown\'\n	)\n) as perpetrator\n,(SELECT CONCAT(loginname,\'<br>\',first_name,\', \',last_name) from registered_user where userid = criminal_complaints.createdby) as createdby\n,(SELECT CONCAT(loginname,\'<br>\',first_name,\', \',last_name) from registered_user where userid = criminal_complaints.changedby) as changedby\n,(SELECT IFNULL(__definition_languages_values.translation, _defined_status.translation_key)  FROM _defined_status\n	LEFT JOIN __definition_languages_values ON __definition_languages_values.locale = \'@@LOCALE@@\'\n		AND programmtype = _defined_status.translation_programmtype\n		AND keyvalue = _defined_status.translation_key\n	WHERE _defined_status.uid = criminal_complaints.status\n) as `status`' WHERE (`function_name` = 'view_criminal_complaints_byfile_3');
INSERT INTO `@@medicscheme@@`.`__definition_rights` (`uid`, `function_name`, `sub_function`, `name_de`, `name_en`, `sortorder`) VALUES (NULL, 'archiv', 'delete_entries', 'Archiv - Entgültig löschen', 'Archive - Delete permanently', '2220') on duplicate key update `name_de` = VALUES(`name_de`), `name_en` = VALUES(`name_en`), `sortorder` = VALUES(`sortorder`);
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Leitstelle übernehmen' WHERE (`locale` = 'de') and (`programmtype` = 'control_centre') and (`keyvalue` = 'take');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Leitstelle' WHERE (`locale` = 'de') and (`programmtype` = 'dashboard') and (`keyvalue` = 'current_control_centre');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Medics im Dienst' WHERE (`locale` = 'de') and (`programmtype` = 'dashboard') and (`keyvalue` = 'officer_in_duty');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Medics on duty' WHERE (`locale` = 'en') and (`programmtype` = 'dashboard') and (`keyvalue` = 'officer_in_duty');
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'control_centre', 'current_control_take', 'Leitstelle übernehmen') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'control_centre', 'current_control_take', 'Take over control center') on duplicate key update `translation`= VALUES(`translation`);
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Medic(s)' WHERE (`locale` = 'de') and (`programmtype` = 'columns') and (`keyvalue` = 'patrol_officers');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Medic(s)' WHERE (`locale` = 'en') and (`programmtype` = 'columns') and (`keyvalue` = 'patrol_officers');
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'form_set_patrol_status_edit', 'Funkstatus setzen') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'form_set_patrol_status_edit', 'Set radio status') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'form_set_officer_patrol_edit', 'Einsatzfahrzeug setzen') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'form_set_officer_patrol_edit', 'Set emergency vehicle') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'form_set_officer_status_edit', 'Status setzen') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'form_set_officer_status_edit', 'Set status') on duplicate key update `translation`= VALUES(`translation`);
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Medics dürfen selbst eintragen?' WHERE (`locale` = 'de') and (`programmtype` = 'columns') and (`keyvalue` = 'allow_officer_self_entry');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Medics dürfen selbst eintragen' WHERE (`locale` = 'de') and (`programmtype` = 'trainings') and (`keyvalue` = 'allow_officer_self_entry');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Allow employee self entry' WHERE (`locale` = 'en') and (`programmtype` = 'columns') and (`keyvalue` = 'allow_officer_self_entry');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Allow employee self entry' WHERE (`locale` = 'en') and (`programmtype` = 'trainings') and (`keyvalue` = 'allow_officer_self_entry');
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('de', 'pageloader', 'form_officer_edit', 'Mitarbeiter bearbeiten') on duplicate key update `translation`= VALUES(`translation`);
INSERT INTO `@@medicscheme@@`.`__definition_languages_values` (`locale`, `programmtype`, `keyvalue`, `translation`) VALUES ('en', 'pageloader', 'form_officer_edit', 'Edit employee') on duplicate key update `translation`= VALUES(`translation`);
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Funkcode' WHERE (`locale` = 'de') and (`programmtype` = 'columns') and (`keyvalue` = 'patrol_status_shortname');
UPDATE `@@medicscheme@@`.`__definition_languages_values` SET `translation` = 'Radio code' WHERE (`locale` = 'en') and (`programmtype` = 'columns') and (`keyvalue` = 'patrol_status_shortname');
UPDATE `@@medicscheme@@`.`__definition_function_buttons` SET `goto_functionname` = 'form_officer', `goto_functiontype` = 'edit' WHERE (`function_name` = 'officers') and (`button` = 'editButton');
UPDATE `@@medicscheme@@`.`__definition_function_buttons` SET `goto_functiontype` = 'view' WHERE (`function_name` = 'officers') and (`button` = 'viewButton');
UPDATE `@@medicscheme@@`.`__definition_additional_data` SET `sql_query` = 'select \n\nfiles_entries.*\n,files_entries.closed as entry_done\n\n,concat(registered_user.loginname, \' - \', registered_user.last_name,\', \',registered_user.first_name) as creator\n,date_format(files_entries.createddate,\'%d.%m.%Y %H:%i:%s\') as createddate\n\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'head\') as `injury_head`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'neck\') as `injury_neck`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'hip\') as `injury_hip`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'leftarm\') as `injury_left_arm`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'leftfoot\') as `injury_left_foot`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'leftleg\') as `injury_left_leg`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'rightarm\') as `injury_right_arm`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'rightfoot\') as `injury_right_foot`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'rightleg\') as `injury_right_leg`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'stomach\') as `injury_stomach`\n,(select injury from files_entries_injuries where files_entries_uid = files_entries.uid and injury_at = \'torso\') as `injury_torso`\n\nfrom files_entries\n    LEFT JOIN registered_user on registered_user.userid = files_entries.createdby\nwhere files_entries.file_uid = @@ID@@\nand files_entries.deleted = 0' WHERE (`function_name` = 'form_files') and (`additional_data_type` = 'treatments');
